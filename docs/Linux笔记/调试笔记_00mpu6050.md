## 1. 自己编写

   这种方式就是自己通过i2c的接口函数去配置传感器的寄存器，然后在某一个条件去获取传感器的数据，进而将数据上报到用户层。
## 2. 使用Rockchip的传感器框架来写
   Rockchip的传感器框架在linux/kernel/drivers/input/sensors目录下，具体参考相应的文档去实现该驱动。
## 3. 使用invenSence自身的驱动代码(无需自己写驱动)
由于内核/drivers/iio/imu/inv_mpu6050/目录下有已写好驱动程序，我们要做的就是
   1. 根据/drivers/iio/imu/inv_mpu6050/Kconfig 配置内核，
   2. 根据原理图使用引脚修改设备树，可以参考内核/Documentation/devicetree/bindings/iio/imu/
      修改设备树文件，添加I2C节点下mpu6050子节点
	
	```dis
	mpu6050@68 {
			compatible = "invensense,mpu6050";
			reg = <0x68>;                         /* 设备地址 */
			interrupt-parent = <&gpio1>;          /* 中断映射 */
			interrupts = <18 IRQ_TYPE_EDGE_RISING>;  
			mount-matrix = "-0.984807753012208",  /* x0 */
						   "0",                   /* y0 */
						   "-0.173648177666930",  /* z0 */
						   "0",                   /* x1 */
						   "-1",                  /* y1 */
						   "0",                   /* z1 */
						   "-0.173648177666930",  /* x2 */
						   "0",                   /* y2 */
						   "0.984807753012208";   /* z2 */
		}; 
	```
   3. 重新编译烧写设备树和内核
   4. 重新编译内核之后，/drivers/iio/imu/inv_mpu6050/目录出现inv-mpu6050.ko inv-mpu6050-i2c.ko，
      将inv-mpu6050.ko inv-mpu6050-i2c.ko拷贝至开发板，依次装载inv-mpu6050.ko inv-mpu6050-i2c.ko。
   ```bash
   insmod inv-mpu6050.ko
   insmod inv-mpu6050-i2c.ko
   ```

```bash
/dev/目录将多出
/dev/iio:device1

cat /sys/bus/iio/devices/iio:device1/name
mpu6050

ls /sys/bus/iio/devices/iio:device1/
```

## 4. I2C调试工具i2c-tools：
i2cdetect – 列举I2C bus和上面所有的设备
i2cdump – 显示设备上所有register的值
i2cget – 读取设备上某个register的值
i2cset – 写入设备上某个register的值

i2cdetect -l 列出所有I2C设备
i2cdetect -y 0 列举I2C(0)上的所有设备
	'--' : 没有这个地址对应的设备
	'UU' : 这个地址的I2C设备在已被驱动使用
i2cdump -f 0 0x68 读取I2C(0)总线上地址为0x68的设备
i2cget -f 0 0x68 0x00 读取I2C(0)总线上地址为0x68的设备0x00寄存器
i2cset -f 0 0x68 0x00 0x01 I2C(0)总线上地址为0x68的设备0x00寄存器写入0x01
